---
import { useTranslations } from "../i18n/utils";

const currentLang = Astro.currentLocale || "es";
const translateLabels = useTranslations(currentLang as "es" | "en");
---

<section aria-label=" alejandro vÃ¡zquez contact" id="contact">
    <div class="contact-background"></div>
    <div id="mailalert">{translateLabels("alertaemail")}</div>
    <div class="contacto">
        <ul>
            <li class="contactList" id="copyLink"><a href="#"></a>Email</li>
        
        <li class="contactList">
            <a
                href="https://www.instagram.com/camelcompact99/"
                target="_blank"
                rel="noopener noreferrer">Instagram</a>
        </li>
        <li class="contactList">
            <a href="https://www.linkedin.com/in/alejandro-vazquez-a9b7162a4/"
                >Linkedin</a>
        </li>
        <li class="contactList">
            <a href="https://www.tiktok.com/@camelcompact99">Tiktok</a>
        </li>
        </ul>
    </div>
</section>

<style>
    #contact {
        height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
    }

    .contact-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("/images/bg.webp");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0;
        transform: scale(1.1);
        transition:
            opacity 1.2s ease-out,
            transform 1.2s ease-out;
        z-index: 0;
    }

    .contact-background::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
        z-index: 1;
    }

    .contact-background.visible {
        opacity: 1;
        transform: scale(1);
    }

    ul {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    .contactList a {
        text-decoration: none;
        color: white;
        font-size: 14px;
        text-shadow: 2px 2px 5px black;
    }
    .contactList a:hover {
        color: rgb(0, 255, 0);
        transition: 0.6s ease-in-out;
    }
    #copyLink {
        font-size: 14px;
        color: rgb(255, 255, 255);
        cursor: pointer;
        text-shadow: 2px 2px 5px black;
    }

    #mailalert {
        position: absolute;
        z-index: 3;
        left: 0;
        margin-top: 20rem;
        background-color: rgb(0, 255, 0);
        padding: 1rem;
        font-size: 1.2rem;
        color: black;
        transition: 0.6s ease-in-out;
        opacity: 0;
    }

    h2 {
        margin: 0;
        font-size: 20px;
        line-height: 20px;
        text-shadow: 2px 2px 5px black;
        color: white;
    }
    .contacto {
        position: relative;
        display: flex;
        z-index: 2;
        padding-left: 2rem;
        padding-right: 2rem;
        max-width: calc(100% - 2rem);
        width: 95%;
        gap: 20px;
    }
</style>

<script type="module">
    document.addEventListener("astro:page-load", () => {
        // Email copy functionality
        document.getElementById("copyLink")?.addEventListener("click", () => {
            const textToCopy = "vazquez.tome.alejandro@gmail.com";
            navigator.clipboard
                .writeText(textToCopy)
                .then(() => {
                    const alertDiv = document.getElementById("mailalert");
                    if (alertDiv) {
                        alertDiv.style.opacity = "100";

                        setTimeout(() => {
                            alertDiv.style.opacity = "0";
                        }, 2000);
                    }
                })
                .catch((err) => {
                    console.error("Error al copiar el texto: ", err);
                });
        });

        // Background animation on scroll
        const contactSection = document.getElementById("contact");
        const contactBackground = document.querySelector(".contact-background");

        if (contactSection && contactBackground) {
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            contactBackground.classList.add("visible");
                        }
                    });
                },
                {
                    threshold: 0.2, // Trigger when 20% of the section is visible
                },
            );

            observer.observe(contactSection);
        }
    });
</script>
